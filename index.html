<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>    </head>
        <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
    <script>
        $(document).ready(function() {
              function formIsReady() {
                    return $("input[name=grain]").val() + $("input[name=wood]").val() + $("input[name=stone]").val() + $("input[name=iron]").val() + $("input[name=gold]").val() > 0
              }
              var resources = ["grain","wood","stone","iron","gold"]
              for (i = 0; i < resources.length; i++) {
              (function (i) {
               var slider = $("#" + resources[i] + "Slider");
               var input = $("#" + resources[i] + "Input");
               slider.val("0");
               input.val("0");
               slider.on("input change", function(e) { input.val($(this).val()); $("button#submit").attr("disabled", !formIsReady());});
               input.on("input change", function(e) { slider.val($(this).val()); $("button#submit").attr("disabled", !formIsReady());});
               })(i)
              }
              $("button#submit").attr("disabled", !formIsReady());
              $("button#submit").click(function(){
                if (formIsReady()) {
                    $.ajax({type: "POST", url: "/.", data: $("#transactionForm").serialize(),
                          success: function(msg){
                            $("#transactionList").html(msg)
                          },
                            error: function(){}
                    })
                }
              });
            });
        </script>
        <style>
            .fixed_header{
                width: 100%;
                table-layout: fixed;
            }
        
            .fixed_header tbody{
                display:block;
                width: 100%;
                overflow: auto;
                height: 100px;
            }
        
            .fixed_header thead tr {
                display: block;
            }
        
            .fixed_header th, .fixed_header td {
                width: 100%;
            }

        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="p2 col-4">
                    <h1>Banka</h1>
                    <div class="">
                        <form id="transactionForm" method="post" action="postTransaction" onsubmit="return false;">
                            <div class="form-group d-flex flex-fill">
                                <span class="align-middle p-2">uzivatel:</span>
                                <strong class="align-middle col-2 p-2">Anonym</strong>
                                <span class="align-middle col-2"></span>
                                <label class="align-middle col-2 p-2" for="sel1">Ucet:</label>
                                <select class="form-control col-3" id="sel1">
                                    <option>Sezam</option>
                                    <option>Agro</option>
                                </select>
                            </div>
                            <label for="customRange2">Grain</label>
                            <div class="form-group row">
                                <div class="d-flex flex-fill">
                                    <div class="col-8">
                                        <input type="range" class="custom-range align-middle" min="0" max="10000000" step="100000" value="0"  id="grainSlider" />
                                    </div>
                                    <div class="col-4">
                                        <input class="form-control" type="number" min="0" max="10000000" step="100000" value="0" id="grainInput" name="grain" />
                                    </div>
                                </div>
                            </div>
                            <label for="customRange2">Wood</label>
                            <div class="form-group row">
                                <div class="d-flex flex-fill">
                                    <div class="col-8">
                                        <input type="range" class="custom-range align-middle" min="0" max="10000000" step="100000" value="0"  id="woodSlider" />
                                    </div>
                                    <div class="col-4">
                                        <input class="form-control" type="number" min="0" max="10000000" step="100000" value="0" id="woodInput" name="wood" />
                                    </div>
                                </div>
                            </div>
                            <label for="customRange2">Stone</label>
                            <div class="form-group row">
                                <div class="d-flex flex-fill">
                                    <div class="col-8">
                                        <input type="range" class="custom-range align-middle" min="0" max="10000000" step="100000" value="0"  id="stoneSlider" />
                                    </div>
                                    <div class="col-4">
                                        <input class="form-control" type="number" min="0" max="10000000" step="100000" value="0" id="stoneInput" name="stone" />
                                    </div>
                                </div>
                            </div>
                            <label for="customRange2">Iron</label>
                            <div class="form-group row">
                                <div class="d-flex flex-fill">
                                    <div class="col-8">
                                        <input type="range" class="custom-range align-middle" min="0" max="10000000" step="100000" value="0"  id="ironSlider" />
                                    </div>
                                    <div class="col-4">
                                        <input class="form-control" type="number" min="0" max="10000000" step="100000" value="0" id="ironInput" name="iron" />
                                    </div>
                                </div>
                            </div>
                            <label for="customRange2">Gold</label>
                            <div class="form-group row">
                                <div class="d-flex flex-fill">
                                    <div class="col-8">
                                        <input type="range" class="custom-range align-middle" min="0" max="10000000" step="100000" value="0"  id="goldSlider" />
                                    </div>
                                    <div class="col-4">
                                        <input class="form-control" type="number" min="0" max="10000000" step="100000" value="0" id="goldInput" name="gold" />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="form-group row">
                                <div class="d-flex justify-content-end col-12">
                                    <div class="col-5">
                                        <input checked="checked" type="checkbox" data-toggle="toggle" data-on="Odesilam" data-off="Dostavam" id="transactionToggle" name="transaction" data-onstyle="success" data-offstyle="danger"/>
                                        <script>
                                            $(function() {
                                              $('#transactionToggle').bootstrapToggle();
                                            })
                                        </script>
                                    </div>
                                    <button id="submit" class="btn btn-primary col-3" data-dismiss="modal">Submit</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="p2 col-8">
                    <h1>Historie pohybu</h1>
                    <table class="fixed_header table table-sm">
                        <thead>
                            <tr>
                                <th scope="col">Datum</th>
                                <th scope="col">Grain</th>
                                <th scope="col">Wood</th>
                                <th scope="col">Strone</th>
                                <th scope="col">Iron</th>
                                <th scope="col">Gold</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-success">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-danger">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-success">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-danger">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-success">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-danger">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-success">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-danger">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-success">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-danger">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-success">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                            <tr class="table-danger">
                                <td>1.1.19</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                                <td>10 000 000</td>
                            </tr>
                        </tbody>
                    <thead>
                        <tr class='table-primary'><th scope="col" style="width:30%">Suma</th><th scope="col" style="width:14%">-1400000</th><th scope="col" style="width:14%">5400000</th><th scope="col" style="width:14%">3700000</th><th scope="col" style="width:14%">12600000</th><th scope="col" style="width:14%">-9500000</th></tr></thead></table>
                </div>
            </div>
        </div>
    </body>
</html>

